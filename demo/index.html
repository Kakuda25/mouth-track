<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="リアルタイム口の動きトラッキングWEBアプリケーション">
    <title>口の動きトラッキング - Mouth Track</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>

<body>
    <div class="app-container">
        <!-- ヘッダー -->
        <header class="app-header">
            <h1>口の動きトラッキング</h1>
            <p class="subtitle">リアルタイムで口の動きを追跡します</p>
        </header>

        <!-- メインコンテンツ -->
        <main class="main-content">
            <!-- カメラプレビュー領域 -->
            <section class="preview-section">
                <div class="video-container">
                    <video id="videoElement" autoplay playsinline></video>
                    <canvas id="canvasElement"></canvas>
                    <div class="overlay-info" id="overlayInfo">
                        <p>カメラを起動してください</p>
                    </div>
                </div>
            </section>

            <!-- コントロールパネル -->
            <section class="control-panel">
                <div class="control-group">
                    <button id="startBtn" class="btn btn-primary">トラッキング開始</button>
                    <button id="stopBtn" class="btn btn-secondary" disabled>トラッキング停止</button>
                </div>

                <div class="control-group">
                    <label for="cameraSelect">カメラ選択:</label>
                    <select id="cameraSelect" class="select-input">
                        <option value="">カメラを検索中...</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>
                        <input type="checkbox" id="mirrorMode" checked>
                        ミラーモード
                    </label>
                </div>
            </section>

            <!-- データ表示パネル -->
            <section class="data-panel">
                <h2>トラッキングデータ</h2>
                <div class="data-display" id="dataDisplay">
                    <div class="data-item">
                        <span class="data-label">FPS:</span>
                        <span class="data-value" id="fpsValue">-</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">信頼度:</span>
                        <span class="data-value" id="confidenceValue">-</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">口の開き:</span>
                        <span class="data-value" id="opennessValue">-</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">口の幅:</span>
                        <span class="data-value" id="widthValue">-</span>
                    </div>
                </div>
            </section>

            <!-- 設定パネル -->
            <section class="settings-panel" id="settingsPanel">
                <h2>設定</h2>
                <div class="settings-content">
                    <div class="setting-item">
                        <label for="smoothingFactor">平滑化係数:</label>
                        <input type="range" id="smoothingFactor" min="0" max="1" step="0.1" value="0.5">
                        <span id="smoothingValue">0.5</span>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="showLandmarks" checked>
                            ランドマーク表示
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="showCoordinates">
                            座標値表示
                        </label>
                    </div>
                </div>
            </section>

        </main>

        <!-- フッター -->
        <footer class="app-footer">
            <p>MediaPipe FaceMeshを使用しています</p>
        </footer>
    </div>

    <!-- MediaPipe FaceMesh (npm packages) -->
    <script src="/node_modules/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="/node_modules/@mediapipe/control_utils/control_utils.js"></script>
    <script src="/node_modules/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="/node_modules/@mediapipe/face_mesh/face_mesh.js"></script>

    <!-- Application JavaScript -->
    <script type="module" src="app.js"></script>
</body>

</html>